<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

    <head>
        <meta charset="utf-8" />
        <title>Register, FeelinTrippy - Payment</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!-- Favicon -->
        <link rel="shortcut icon" href="../img/logo.png">
        </link>
        <!-- Template CSS Files -->
        <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css" >
        </link>
        <link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css" >
        </link>
        <link rel="stylesheet" type="text/css" href="../css/style.css" ></link>

        <link rel="stylesheet" type="text/css" href="../css/skins/yellow.css" >
        </link>

        <!-- Template JS Files -->
        <script src="../js/modernizr.js"></script>

    </head>

    <h:body class="double-diagonal dark portfolio-page">
        <h:form id="form"> 
            <!-- Page Wrapper Starts -->
            <div class="wrapper">
                <header class="header">
                    <div class="header-inner">
                        <!-- Navbar Starts -->
                        <nav class="navbar">
                            <!-- Logo Starts -->
                            <div class="logo">
                                <a data-toggle="collapse" data-target=".navbar-collapse.show" class="navbar-brand" href="filterTrip.jsp">
                                    <!-- Logo White Starts -->
                                    <img id="logo-light" class="logo-light" src="../img/logo.png" alt="logo-light" />
                                    <!-- Logo White Ends -->
                                    <!-- Logo Black Starts -->
                                    <img id="logo-dark" class="logo-dark" src="../img/logo.png" alt="logo-dark" />
                                    <!-- Logo Black Ends -->
                                </a>
                            </div>
                            <!-- Logo Ends -->
                            <!-- Toggle Icon for Mobile Starts -->
                            <button class="navbar-toggle navbar-toggler" type="button" data-toggle="collapse" data-target=".navbar-collapse" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                                <span id="icon-toggler">
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                </span>
                            </button>
                            <!-- Toggle Icon for Mobile Ends -->
                            <div id="navbarSupportedContent" class="collapse navbar-collapse navbar-responsive-collapse">
                                <!-- Main Menu Starts -->

                                <ul class="nav navbar-nav" id="main-navigation">
                                    <li><a href="filterTrip.xhtml"><i class="fa fa-home"></i> Home</a></li>
                                    <li><a href="profile.xhtml"><i class="fa fa-user"></i> Profile</a></li>
                                    <li class="dropdown">
                                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Trips
                                            <span class="caret"></span></a>
                                        <ul class="dropdown-menu">
                                            <li><a href="mySavedTrips.xhtml"><i class="fa fa-envelope"></i> Saved Trips</a></li>
                                            <li><a href="bookedTrips.xhtml"><i class="fa fa-envelope"></i> Booked Trips</a></li>
                                            <li><a href="myPastTrips.xhtml"><i class="fa fa-envelope"></i> Past Trips</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="recommendActivity.xhtml"><i class="fa fa-envelope"></i> Recommend Us</a></li>
                                    <li><h:commandLink action="#{authenticationManagedBean.logout()}" ><i class="fa fa-user"></i> Log Out</h:commandLink></li>
                                </ul>

                                <!-- Main Menu Ends -->
                            </div>
                            <!-- Search Input Starts -->

                            <!-- Search Input Ends -->
                            <!-- Navigation Menu Ends -->
                        </nav>
                        <!-- Navbar Ends -->
                    </div>
                </header>  
                <div class="container-fluid user-auth">
                    <div class="col-sm-4 col-md-4 col-lg-4">
                        <!-- Logo Starts -->

                        <!-- Logo Ends -->
                        <!-- Slider Starts -->

                        <!-- Slider Ends -->
                    </div>
                    <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">

                        <div class="form-container">
                            <div>
                                <!-- Main Heading Starts -->
                                <div class="text-center top-text">



                                    <!-- Main Heading Ends -->
                                    <!-- Form Starts -->
                                    <!--                            <form class="custom-form" method="POST" action="LoginServlet">-->
                                    <div class="text-center top-text">
                                        <h1><span>Payment</span></h1>
                                        <p></p>
                                    </div>

                                    <!-- Input Field Starts -->
                                    <div class="project-details">

                                        <h3><h:outputText value="#{trippyManagedBean.selectedEventItem.eventName}" /></h3>
                                        <ul class="unstyled">
                                            <li><i class="fa fa-user"></i><span class="detail-name">Location </span>: <span class="detail-value"><h:outputText value="#{trippyManagedBean.selectedEventItem.address}" /></span></li>
                                            <li><i class="fa fa-calendar"></i><span class="detail-name"> Date</span>: <span class="detail-value"><h:outputText value="#{trippyManagedBean.selectedEventItem.startDate}" ><f:convertDateTime type="date" pattern="dd/MM/yyyy"/></h:outputText>  - <h:outputText value="#{trippyManagedBean.selectedEventItem.endDate}" ><f:convertDateTime type="date" pattern="dd/MM/yyyy"/></h:outputText></span></li>
                                            <li><i class="fa fa-cogs"></i><span class="detail-name"> Price </span>: <span class="detail-value"><h:outputText value="$#{trippyManagedBean.selectedEventItem.price}0" rendered="#{trippyManagedBean.selectedEventItem.price gt 0}" /><h:outputText value="$0" rendered="#{trippyManagedBean.selectedEventItem.price le 0}" /></span></li>
                                        </ul>
                                        <h:commandButton style="display:none" id="animalLink" action="#{trippyManagedBean.bookSavedTrip()}" value="click">
                                            <f:ajax/>
                                        </h:commandButton>

                                        <div id="paypal-button"></div>
                                        <script src="https://www.paypalobjects.com/api/checkout.js"></script>
                                        <script>
                                            paypal.Button.render({
                                                // Configure environment
                                                env: 'sandbox',
                                                client: {
                                                    sandbox: 'AT75mpfVLXmLpRYZDk7HSzUsk9bV-NX1NA3qoW1rChE6DH90GLBYgipUGGsxDY_qUcv0v_ZtojFGEl_P',
                                                    production: 'AdvBxLACTsil3XndW00-jR46rhrOEkO1wR9d6wSZyvlyYk2htPl08rVmIGVFab2BySUfKXnDOOB9RoLI'
                                                },
                                                // Customize button (optional)
                                                locale: 'en_US',
                                                style: {
                                                    size: 'medium',
                                                    color: 'gold',
                                                    shape: 'pill',
                                                    label: 'checkout',
                                                },
                                                // Set up a payment
                                                payment: function (data, actions) {
                                                    return actions.payment.create({
                                                        transactions: [{
                                                                amount: {
                                                                    total: '#{trippyManagedBean.selectedEventItem.price.toString()}',
                                                                    currency: 'SGD'
                                                                },
                                                                description: 'The payment transaction description.',
                                                                custom: '90048630024435',
                                                                //invoice_number: '12345', Insert a unique invoice number
                                                                payment_options: {
                                                                    allowed_payment_method: 'INSTANT_FUNDING_SOURCE'
                                                                },
                                                                soft_descriptor: 'ECHI5786786',
                                                                item_list: {
                                                                    items: [
                                                                        {
                                                                            name: '#{trippyManagedBean.selectedEventItem.eventName}',
                                                                            description: '#{trippyManagedBean.selectedEventItem.eventDescription}',
                                                                            quantity: '1',
                                                                            price: '#{trippyManagedBean.selectedEventItem.price.toString()}',

                                                                            currency: 'SGD'

                                                                        }]
                                                                }
                                                            }],
                                                        note_to_payer: 'Contact us for any questions on your order.'
                                                    });
                                                },
                                                // Execute the payment
                                                onAuthorize: function (data, actions) {
                                                    return actions.payment.execute().then(function () {
                                                        // Show a confirmation message to the buyer
                                                        window.alert('Thank you for your purchase!');
                                                        var jsfCommandLink = document.getElementById("form:animalLink");
                                                        jsfCommandLink.click();
                                                    });
                                                }
                                            }, '#paypal-button');

                                        </script>

                                    </div>
                                    <!-- Submit Form Button Ends -->

                                    <!-- Form Ends -->
                                </div>
                            </div>
                        </div>
                        <!-- Copyright Text Starts -->
                        <p class="text-center copyright-text">Copyright © 2018 FeelinTrippy All Rights Reserved</p>
                        <!-- Copyright Text Ends -->
                    </div>
                </div>
            </div>
        </h:form>
        <!-- Wrapper Ends -->

        <!-- Template JS Files -->
        <script src="../js/jquery-2.2.4.min.js"></script>
        <script src="../js/plugins/jquery.easing.1.3.js"></script>
        <script src="../js/plugins/bootstrap.min.js"></script>

        <!-- Main JS Initialization File -->
        <script src="../js/custom.js"></script>
    </h:body>
</html>
